sap.ui.define(["sap/ui/core/mvc/ControllerExtension"],function(e){"use strict";var t="mailto:nida.afreen@peolsolutions.com";var t;return e.extend("department.departmentapp.ext.controller.Listcontroller",{override:{onInit:function(){debugger;var e=this.base.getExtensionAPI().getModel()},routing:{onBeforeBinding:async function(){debugger;var e=this.base.getExtensionAPI().getModel();if(!e){console.error("Model is not available.");return}var r;if(typeof e.getServiceUrl==="function"){r=e.getServiceUrl();console.log("Service URL:",r)}else{console.error("Unable to determine the service URL.");return}try{const e=await new Promise((e,t)=>{jQuery.ajax({url:r+"/authorisation",method:"GET",dataType:"json",success:function(t){e(t)},error:function(e,r,n){t(new Error(r+": "+n))}})});console.log("Fetched data:",e);if(e&&e.value&&Array.isArray(e.value)){const r=e.value.filter(e=>e.Email===t).map(e=>e.role)[0];debugger;console.log(r);if(r!=="Admin"){this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")&&(e.getId().includes("Create")||e.getId().includes("Delete"))}).forEach(function(e){e.setVisible(false)});this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.fe.macros.controls.FilterBar")}).forEach(function(e){e.setVisible(true)});this.base.getView().getContent()[0].mAggregations.header.mAggregations.content[0].mAggregations.items[0].mAggregations.content.setFilterConditions({$editState:[{operator:"DRAFT_EDIT_STATE",values:["ALL_HIDING_DRAFTS"],validated:"Validated"}]})}}}catch(e){console.error("Error fetching data",e)}}}}})});
//# sourceMappingURL=Listcontroller.controller.js.map