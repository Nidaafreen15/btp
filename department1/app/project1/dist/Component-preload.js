//@ui5-bundle project1/Component-preload.js
sap.ui.require.preload({
	"project1/Component.js":function(){
sap.ui.define(["sap/fe/core/AppComponent"],function(e){"use strict";return e.extend("project1.Component",{metadata:{manifest:"json"}})});
},
	"project1/ext/controller/Teacherlistcontroller.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/ControllerExtension"],function(e){"use strict";var t;return e.extend("project1.ext.controller.Teacherlistcontroller",{override:{onInit:function(){debugger;var e=this.base.getExtensionAPI().getModel();var n=(new sap.ushell.services.UserInfo).getEmail();var n="nida.afreen@peolsolutions.com";t=n;console.log(n);console.log(t)},routing:{onBeforeBinding:async function(){debugger;const e=this.base.getView();const t=e.findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")&&(e.getId().includes("Create")||e.getId().includes("Delete"))});debugger;const n=t[0];const s=t[1];const i=t[2];const o=t[3];const r=t[4];const a=t[5];i.setVisible(false);o.setVisible(false);r.setVisible(false);a.setVisible(false);debugger;var g="nida.afreen@peolsolutions.com";console.log(oUser);console.log(g);this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")}).forEach(function(e){});if(!oModel){console.error("Model is not available.");return}var l;if(typeof oModel.getServiceUrl==="function"){l=oModel.getServiceUrl();console.log("Service URL:",l)}else{console.error("Unable to determine the service URL.");return}try{const e=await new Promise((e,t)=>{jQuery.ajax({url:l+"/authorisation",method:"GET",dataType:"json",success:function(t){e(t)},error:function(e,n,s){t(new Error(n+": "+s))}})});console.log("Fetched data:",e);if(e&&e.value&&Array.isArray(e.value)){const t=e.value.filter(e=>e.Email===g).map(e=>e.role)[0];debugger;console.log(t);if(t!=="Admin"){this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")&&(e.getId().includes("Create")||e.getId().includes("Delete"))}).forEach(function(e){e.setVisible(false);var t=this.getView().mAggregations.content[0].mAggregations.header.mAggregations.content[0].mAggregations.items[0].visible=false});this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")&&(e.getId().includes("Draft")||e.getId().includes("Save"))}).forEach(function(e){e.setVisible(false)});this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Input")&&e.getId().includes("Draft")}).forEach(function(e){e.setEditable(false)});this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Select")&&e.getId().includes("EditingStatus")}).forEach(function(e){e.setSelectedKey("All");e.setEnabled(false)});const e=this.base.getView().getContent()[0].mAggregations.content.mAggregations.content.mAssociations.filter;var c=sap.ui.getCore().byId(e);var u={$editState:[{operator:"DRAFT_EDIT_STATE",values:["ALL_HIDING_DRAFTS","All (Hiding Drafts)"],validated:"Validated"}]};c.setFilterConditions(u);var d=this.getView().mAggregations.content[0].mAggregations.header.mAggregations.content[0].mAggregations.items[0];if(d){d.setVisible(false)}}if(t===undefined){this.base.getView().findAggregatedObjects(true,function(e){if(e.isA("sap.fe.macros.controls.FilterBar")){e.setVisible(false)}})}}}catch(e){console.error("Error fetching data",e)}}}}})});
},
	"project1/ext/controller/Teacontroller.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/ControllerExtension"],function(e){"use strict";return e.extend("project1.ext.controller.Teacontroller",{override:{onInit:function(){debugger;var e=this.base.getExtensionAPI().getModel()},routing:{onBeforeBinding:async function(e){debugger;var t=(new sap.ushell.services.UserInfo).getEmail();var t="nida.afreen@peolsolutions.com";var n=this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.DatePicker")&&e.getId().includes("dob")});var a=new Date;var r=new Date(a.getFullYear()-25,a.getMonth(),a.getDate());n[0].setMaxDate(r)},adjustUIControls:function(){var e=this;setTimeout(function(){e.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")||e.isA("sap.m.DatePicker")||e.isA("sap.m.Input")||e.isA("sap.m.TextArea")||e.isA("sap.m.ComboBox")}).forEach(function(e){var t=e.getId();if(e.isA("sap.m.Button")&&t.includes("Save")){e.setText("Send for approval")}}.bind(e))}.bind(e),500)},fetchAndProcessData:async function(e){var t=this;try{const t=await new Promise((t,n)=>{jQuery.ajax({url:e+"/authorisation",method:"GET",dataType:"json",success:function(e){t(e)},error:function(e,t,a){n(new Error(t+": "+a))}})});const g=await new Promise((t,n)=>{jQuery.ajax({url:e+"/Department",method:"GET",dataType:"json",success:function(e){t(e)},error:function(e,t,a){n(new Error(t+": "+a))}})});debugger;console.log("Fetched auth data:",t);console.log("Fetched dept data:",g);if(t&&t.value&&Array.isArray(t.value)&&g&&g.value&&Array.isArray(g.value)){var n=t.value.find(e=>e.Email===useremail);if(!n){debugger;console.error("User not found in authorisation data.");return}var a=n.role;console.log(`User Role: ${a}`);var r=this.getView().getBindingContext();var i=r.getPath();var o=null;var s=i.match(/DepartmentID='([^']+)'/);if(s&&s[1]){o=s[1]}if(a!==o&&a!=="Admin"){this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")}).forEach(function(e){if(e.getId().includes("Edit")||e.getId().includes("Delete")||e.getId().includes("Create")){e.setVisible(false)}})}if(a!=="Admin"){debugger;this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Input")&&e.getBindingPath("value")==="DepartmentName"}).forEach(function(e){e.setEditable(false)})}}}catch(e){console.error("Error fetching data",e)}},onAfterBinding:async function(e){debugger;var t;var n=null;var a=this.base.getView().getContent()[0].getSections()[1].mAggregations._grid.mAggregations.content[0].mAggregations._grid.mAggregations.content[0].mAggregations.content.sId;await this.base.getView().getContent()[0].getSections()[1].mAggregations._grid.mAggregations.content[0].mAggregations._grid.mAggregations.content[0].mAggregations.content.setUploadEnabled(false);var r=null;try{r=await this.getView().getContent()[0].mAggregations.footer.sId}catch(e){r=null}debugger;setTimeout(async()=>{sap.ui.getCore().byId(r).mAggregations.content.mAggregations.content.forEach(async e=>{if(e.getVisible()){if(e.getText()=="Discard Draft"){await sap.ui.getCore().byId(a).setUploadEnabled(true);await sap.ui.getCore().byId(a).mAggregations.items.forEach(async e=>{e.setEnabledRemove(true);e.setEnabledEdit(true)})}}})},400)}},_delay:function(e){return new Promise(t=>setTimeout(t,e))}}})});
},
	"project1/ext/fragment/Attach.fragment.xml":'<core:FragmentDefinition xmlns:upload="sap.m.upload" xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros"><upload:UploadSet id = "uploadSet"\n\t\t\t\t\tcore:require="{ handler:\'project1/ext/fragment/Attach\'}"\n\t\t\t\t\tinstantUpload="false"\n\t\t\t\t\tuploadEnabled="true"\n\t\t\t\t\tshowIcons="true"\n\t\t\t\t\tafterItemAdded="handler.onAfterItemAdded"\n\t\t\t\t\tuploadCompleted="handler.onUploadCompleted"\n\t\t\t\t\tafterItemRemoved="handler.afterItemRemoved"\n\t\t\t\t\titems="{\n\t\t\t\t\t\t\t\tpath: \'teatofile\',\n\t\t\t\t\t\t\t\tparameters: {\n\t\t\t\t\t\t\t\t\t$orderby: \'createdAt desc\'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttemplateShareable: false}"\n\t\t\t\t><upload:items><upload:UploadSetItem id="_IDGenUploadSetItem1"\n\t\t\t\t\t\t\n\t\t\t\t\t\t\tfileName="{fileName}"\n\t\t\t\t\t\t\tmediaType="{mediaType}"\n\t\t\t\t\t\t\turl="{url}"\n\t\t\t\t\t\t\tthumbnailUrl="{\n\t\t\t\t\t\t\t\tpath: \'mediaType\',\n\t\t\t\t\t\t\t\tformatter: \'handler.formatThumbnailUrl\'\n\t\t\t\t\t\t\t}"\n\t\t\t\t\t\t\tenabledEdit="false"\n\t\t\t\t\t\t\tenabledRemove="false"\n\t\t\t\t\t\t\tvisibleEdit="true"\n\t\t\t\t\t\t\tvisibleRemove="true"\n\t\t\t\t\t\t\topenPressed="handler.onOpenPressed"\n\t\t\t\t\t\t\tremovePressed="handler.onRemovePressed"\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t><upload:attributes><ObjectAttribute id="_IDGenObjectAttribute1"\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\ttitle="Uploaded By"\n\t\t\t\t\t\t\t\t\ttext="{createdBy}"\n\t\t\t\t\t\t\t\t\tactive="false"\n\t\t\t\t\t\t\t\t/><ObjectAttribute id="_IDGenObjectAttribute2"\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\ttitle="Uploaded on"\n\t\t\t\t\t\t\t\t\ttext="{createdAt}"\n\t\t\t\t\t\t\t\t\tactive="false"\n\t\t\t\t\t\t\t\t/><ObjectAttribute id="_IDGenObjectAttribute3"\n\t\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t\t\ttitle="File Type"\n\t\t\t\t\t\t\t\t\ttext="{mediaType}"\n\t\t\t\t\t\t\t\t\tactive="false"\n\t\t\t\t\t\t\t\t/><ObjectAttribute id="_IDGenObjectAttribute4"\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\ttitle="File Size"\n\t\t\t\t\t\t\t\t\ttext="{size}"\n\t\t\t\t\t\t\t\t\tactive="false"\n\t\t\t\t\t\t\t\t/></upload:attributes></upload:UploadSetItem></upload:items></upload:UploadSet></core:FragmentDefinition>\n',
	"project1/ext/fragment/Attach.js":function(){
sap.ui.define(["sap/m/MessageToast"],function(e){"use strict";var t;var a=this;var o;var r;return{onAfterItemAdded:function(e){86;debugger;var a=e.oSource.getModel().getServiceUrl();var r=e.getParameter("item");var i=window.location.href;const n=/ttuuid=([a-fA-F0-9-]+)/;const c=i.match(n);if(c){o=c[1];console.log(o)}else{console.log("Number not found in URL")}var s=async function(e){var r={mediaType:e.getMediaType(),fileName:e.getFileName(),size:e.getFileObject().size,fkey:o};debugger;var i={url:a+`Teacher(ttuuid=${o},IsActiveEntity=false)/teatofile`,method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify(r)};await new Promise((e,a)=>{debugger;$.ajax(i).done((a,o,r)=>{debugger;t=a.id;e(a)}).fail(e=>{a(e)})})};s(r).then(e=>{debugger;var o=a+`Files(id=${t},IsActiveEntity=false)/content`;t=null;r.setUploadUrl(o);r.setUrl(o);var i=this.byId("uploadSet");i.setHttpRequestMethod("PUT");i.uploadItem(r)}).catch(e=>{console.log(e)})},onOpenPressed:function(e){debugger;var t=e.oSource.getModel().getServiceUrl();var a=e.oSource.mProperties.url;if(!a.startsWith(t)){let o=t+a.substring(1);e.oSource.mProperties.url=o}},onUploadCompleted:function(e){debugger;var t=this.byid("uploadSet");t.removeAllIncompleteItems()},afterItemRemoved:function(e){debugger;var t=e.oSource.getModel().getServiceUrl();debugger;const a=/^(.*?),IsActiveEntity=/;let o=e.mParameters.item.mProperties.url.match(a);let r=o[1]+",IsActiveEntity=false)";$.ajax({url:t+r,method:"DELETE"})},formatThumbnailUrl:function(e){debugger;var t;switch(e){case"image/png":t="sap-icon://card";break;case"text/plain":t="sap-icon://document-text";break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":t="sap-icon://excel-Attach";break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":t="sap-icon://doc-Attach";break;case"application/pdf":t="sap-icon://pdf-Attach";break;default:t="sap-icon://Attach"}return t}}});
},
	"project1/i18n/i18n.properties":'# This is the resource bundle for project1\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=Teacherapp\n\n#YDES: Application description\nappDescription=An SAP Fiori application.\n\n#XFLD,42\nflpTitle=new department\n\n#XFLD,42\nflpTitle=teacher object\n\n#XFLD,57\nflpTitle=teacher application\n',
	"project1/manifest.json":'{"_version":"1.59.0","sap.app":{"id":"project1","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"0.0.1"},"title":"{{TeacherApp}}","description":"{{TeacherApplication}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:lrop","version":"1.14.2","toolsId":"ef8076e4-4fb8-406e-a524-e80e47ce0b70"},"dataSources":{"mainService":{"uri":"odata/v4/my/","type":"OData","settings":{"annotations":[],"odataVersion":"4.0"}}},"crossNavigation":{"inbounds":{"departmentobj-display":{"semanticObject":"departmentobj","action":"display","title":"{{flpTitle}}","signature":{"parameters":{},"additionalParameters":"allowed"}},"teacherobj-display":{"semanticObject":"teacherobj","action":"display","title":"{{flpTitle}}","signature":{"parameters":{},"additionalParameters":"allowed"}},"teacherapp-display":{"semanticObject":"teacherapp","action":"display","title":"{{flpTitle}}","signature":{"parameters":{},"additionalParameters":"allowed"}}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.126.2","libs":{"sap.m":{},"sap.ui.core":{},"sap.ushell":{},"sap.fe.templates":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"project1.i18n.i18n"}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}},"@i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties"}},"resources":{"css":[]},"routing":{"config":{},"routes":[{"pattern":":?query:","name":"TeacherList","target":"TeacherList"},{"pattern":"Teacher({key}):?query:","name":"TeacherObjectPage","target":"TeacherObjectPage"}],"targets":{"TeacherList":{"type":"Component","id":"TeacherList","name":"sap.fe.templates.ListReport","options":{"settings":{"contextPath":"/Teacher","variantManagement":"None","navigation":{"Teacher":{"detail":{"route":"TeacherObjectPage"}}},"controlConfiguration":{"@com.sap.vocabularies.UI.v1.LineItem":{"tableSettings":{"type":"ResponsiveTable","selectAll":false}}},"hideFilterBar":false,"defaultTemplateAnnotationPath":"com.sap.vocabularies.UI.v1.SelectionPresentationVariant#tableView","views":{"paths":[{"key":"tableView","annotationPath":"com.sap.vocabularies.UI.v1.SelectionPresentationVariant#tableView"},{"key":"tableView7","annotationPath":"com.sap.vocabularies.UI.v1.SelectionPresentationVariant#tableView7"},{"key":"tableView8","annotationPath":"com.sap.vocabularies.UI.v1.SelectionPresentationVariant#tableView8"}]},"initialLoad":"Enabled"}}},"TeacherObjectPage":{"type":"Component","id":"TeacherObjectPage","name":"sap.fe.templates.ObjectPage","options":{"settings":{"editableHeaderContent":false,"contextPath":"/Teacher","content":{"body":{"sections":{"Attach":{"template":"project1.ext.fragment.Attach","position":{"placement":"After","anchor":"GeneratedFacet1"},"title":"attach"}}}}}}}}},"extends":{"extensions":{"sap.ui.controllerExtensions":{"sap.fe.templates.ListReport.ListReportController":{"controllerName":"project1.ext.controller.Teacherlistcontroller"},"sap.fe.templates.ObjectPage.ObjectPageController":{"controllerName":"project1.ext.controller.Teacontroller"}}}}},"sap.fiori":{"registrationIds":[],"archeType":"transactional"},"sap.cloud":{"public":true,"service":"collegeapplication"}}'
});
//# sourceMappingURL=Component-preload.js.map
