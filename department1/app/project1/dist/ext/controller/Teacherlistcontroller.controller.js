sap.ui.define(["sap/ui/core/mvc/ControllerExtension"],function(e){"use strict";var t;return e.extend("project1.ext.controller.Teacherlistcontroller",{override:{onInit:function(){debugger;var e=this.base.getExtensionAPI().getModel();var n=(new sap.ushell.services.UserInfo).getEmail();var n="nida.afreen@peolsolutions.com";t=n;console.log(n);console.log(t)},routing:{onBeforeBinding:async function(){debugger;const e=this.base.getView();const t=e.findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")&&(e.getId().includes("Create")||e.getId().includes("Delete"))});debugger;const n=t[0];const s=t[1];const i=t[2];const o=t[3];const r=t[4];const a=t[5];i.setVisible(false);o.setVisible(false);r.setVisible(false);a.setVisible(false);debugger;var g="nida.afreen@peolsolutions.com";console.log(oUser);console.log(g);this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")}).forEach(function(e){});if(!oModel){console.error("Model is not available.");return}var l;if(typeof oModel.getServiceUrl==="function"){l=oModel.getServiceUrl();console.log("Service URL:",l)}else{console.error("Unable to determine the service URL.");return}try{const e=await new Promise((e,t)=>{jQuery.ajax({url:l+"/authorisation",method:"GET",dataType:"json",success:function(t){e(t)},error:function(e,n,s){t(new Error(n+": "+s))}})});console.log("Fetched data:",e);if(e&&e.value&&Array.isArray(e.value)){const t=e.value.filter(e=>e.Email===g).map(e=>e.role)[0];debugger;console.log(t);if(t!=="Admin"){this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")&&(e.getId().includes("Create")||e.getId().includes("Delete"))}).forEach(function(e){e.setVisible(false);var t=this.getView().mAggregations.content[0].mAggregations.header.mAggregations.content[0].mAggregations.items[0].visible=false});this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")&&(e.getId().includes("Draft")||e.getId().includes("Save"))}).forEach(function(e){e.setVisible(false)});this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Input")&&e.getId().includes("Draft")}).forEach(function(e){e.setEditable(false)});this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Select")&&e.getId().includes("EditingStatus")}).forEach(function(e){e.setSelectedKey("All");e.setEnabled(false)});const e=this.base.getView().getContent()[0].mAggregations.content.mAggregations.content.mAssociations.filter;var c=sap.ui.getCore().byId(e);var u={$editState:[{operator:"DRAFT_EDIT_STATE",values:["ALL_HIDING_DRAFTS","All (Hiding Drafts)"],validated:"Validated"}]};c.setFilterConditions(u);var d=this.getView().mAggregations.content[0].mAggregations.header.mAggregations.content[0].mAggregations.items[0];if(d){d.setVisible(false)}}if(t===undefined){this.base.getView().findAggregatedObjects(true,function(e){if(e.isA("sap.fe.macros.controls.FilterBar")){e.setVisible(false)}})}}}catch(e){console.error("Error fetching data",e)}}}}})});
//# sourceMappingURL=Teacherlistcontroller.controller.js.map